<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>探究溫度對溶解速率的影響</title>
    <div style="float: right; width: 50%;">
    <img src="https://imagedb.museum.eduhk.hk/media/7a/f9/c5/7af9c528e521498f96664195ba08c54d.jpg"  alt="這是圖片" title="flask"
    width="400px"
    height="400px;">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/regression@2.0.1/dist/regression.min.js"></script>
    <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#2D82B7',
            secondary: '#42B883',
            accent: '#FF6B6B',
            info: '#4FC3F7',
            warning: '#FFB74D',
            light: '#f8fafc',
            dark: '#1e293b'
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
   
    
    .accordion-content.open {
      max-height: 800px; /* 增加高度以容納所有内容 */
      padding-top: 1rem !important;
      padding-bottom: 1rem !important;
    }
    
    
    /* 科學氣泡背景效果 */
    .bubble {
      position: absolute;
      border-radius: 50%;
      background: var(--bubble-color);
      z-index: 0;
      opacity: 0.7;
    }
    
    
  </style>
</head>


<body>
    <div class="container">
        <h1>探究溫度對溶解速率的影響</h1>
        <input type="number" id="temp" placeholder="溶劑起始溫度 (°C)" required>
        <input type="number" id="time" placeholder="溶解時間 (s)" required>
        <button onclick="addData()" style="background:#f50;">加入數據</button>
        <button onclick="trainModel()" style="background:rgb(184, 153, 255);">開始訓練模型</button>
        <button onclick="clearData()" style="background:rgb(153, 255, 231);">清空</button>
        

        <h2>如何使用</h2>
        <div class="mb-4 p-3 bg-blue-50 border-l-4 border-info rounded-md">
          <div class="flex items-start">
        
            <div>
                <p style="color:#f00;">
            1. 請輸入溶劑起始溫度和溶解時間，點擊加入數據按鈕
                
                </p>
                <p style="color:#f90;"">
            2. 點擊開始訓練模型按鈕後，模型將學習數據,展示圖表
                  
                </p>
                <p style="color:#FF6B6B;"">
            3. 溶劑溫度越高，通常會提高溶解速率。記錄至少3個不同數據點，會有更準確結果
                  
                </p>
                <p style="color:#d66bf3;"">
            4. 在預測處輸入新溫度，將能預測溶解時間
                  
                </p>
            </div>
          </div>
        </div>

        

    </div>


    <div style="float: left; width: 50%;">



        <h3>數據圖表</h3>
            <p style="color:#4FC3F7;"">
            線性模型的數學公式
            </p>
        <img src="https://developers.google.com/static/machine-learning/crash-course/linear-regression/images/equation.png?hl=zh-tw
"width="400px" height="300px;">

        <div id="predictionResult"></div>
        <canvas id="regressionChart" width="200" height="100"></canvas>
        <div id="error" class="error"></div>
    </div>

  <div>
      <table>
        <tr>
          <td> 線性迴歸是一種資料分析技術，可使用另一個相關且已知的資料值來預測未知資料的值。
它在數學上建模為線性方程。 </td>
        </tr>
          <td>線性迴歸模型相對簡單，並可提供易於解釋的數學公式來產生預測。</td>
        </tr>
      </table>
      
      <style>
table, th, td {
  border:1px solid black;
}
</style>
  </div>

  <div style="float: right; width: 50%;">
    <h2>預測</h2>
        <input type="number" id="newTemp" placeholder="新的溫度 (°C)" required>
        <button onclick="predict()">預測溶解時間</button>
    </div>


    <script>
        let data = [];
        let model = null;
        let chart = null;

        function addData() {
            const temp = parseFloat(document.getElementById('temp').value);
            const time = parseFloat(document.getElementById('time').value);
            if (!isNaN(temp) && !isNaN(time)) {
                data.push([temp, time]);
                document.getElementById('temp').value = '';
                document.getElementById('time').value = '';
                document.getElementById('error').textContent = '';
            } else {
                document.getElementById('error').textContent = '請輸入有效的數字。';
            }
        }

        function trainModel() {
            if (data.length < 2) {
                document.getElementById('error').textContent = '需要至少兩個數據點才能訓練模型。';
                return;
            }

            const regressionResult = regression.linear(data);
            model = regressionResult;

            const X = data.map(d => d[0]);
            const y = data.map(d => d[1]);

            drawChart(X, y, regressionResult);
        }

        function drawChart(X, y, regressionResult) {
            const ctx = document.getElementById('regressionChart').getContext('2d');

            if (chart) {
                chart.destroy();
            }

            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: '數據點',
                        data: X.map((x, i) => ({ x: x, y: y[i] })),
                        backgroundColor: 'blue',
                        pointRadius: 5
                    },
                    {
                        label: '線性回歸模型',
                        type: 'line',
                        data: X.map(x => ({ x: x, y: regressionResult.equation[0] * x + regressionResult.equation[1] })),
                        borderColor: 'red',
                        borderWidth: 2,
                        fill: false,
                        pointRadius: 0
                    }]
                },
                options: {
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '溶劑起始溫度(°C)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '溶解時間 (s)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true
                        }
                    }
                }
            });
        }


        function predict() {
            const newTemp = parseFloat(document.getElementById('newTemp').value);
            if (model) {
                const predictedTime = model.equation[0] * newTemp + model.equation[1];
                document.getElementById('predictionResult').textContent = `預測溶解時間: ${predictedTime.toFixed(2)} s`;
            } else {
                document.getElementById('error').textContent = '請先訓練模型。';
            }
        }




        function clearData() {
            data = [];
            model = null;
            document.getElementById('predictionResult').textContent = '';
            document.getElementById('error').textContent = '';

            if (chart) {
                chart.destroy();
                chart = null;
            }
        }
    </script>
</body>
</html>
